---
title: "`AssignmentCheck`: automatic check for your students"
author: "George Moroz"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{`AssignmentCheck`: automatic check for your students}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

### 1. Installation
Since `AssignmentCheck` is an R package, you should install [R](https://www.r-project.org/) on your PC if you haven't already done so. To install the `AssignmentCheck` package, run the following command at your R IDE, so you can also get the development version from GitHub:
```{r, eval= F}
install.packages("devtools")
devtools::install_github("agricolamz/AssignmentCheck")
```

Load package:
```{r}
library(AssignmentCheck)
```

### 2. Checks
Imagine that we have a directory with some files from our students
```{r, eval=FALSE}
list.files()
```
```{r, echo= FALSE}
my_files <- c("test_1.Rmd", "test_2.Rmd", "test_3.Rmd", "test_4.Rmd", "test.txt")
my_files
```

As you can see, there are `.Rmd` files, and one `.txt` file. These files have awfull names, but believe me: even if you ask your student to name files during some pattern, you will recieve a couple files with nasty names. Lets look inside of one of them:
```{r, eval=FALSE}
readLines("test_1.Rmd")
```
```{r, echo= FALSE}
my_files <- c(
  system.file("extdata", "test_1.Rmd", package = "AssignmentCheck"),
  system.file("extdata", "test_2.Rmd", package = "AssignmentCheck"),
  system.file("extdata", "test_3.Rmd", package = "AssignmentCheck"),
  system.file("extdata", "test_4.Rmd", package = "AssignmentCheck")
)
readLines(my_files[1])
```

As a teacher you can make your own correct file and create an expectations object using `make_expectations` function. Lets make `test_1.Rmd` the base correct file:

```{r, eval=FALSE}
make_expectations("test_1.Rmd")
```
```{r, echo= FALSE}
make_expectations(my_files[1])
```

So that correct answers you can provide to the `test_files`. This function takes all `.Rmd` files and check, whether `R` code in `R` chunks produces the same result that we expected. Our expectations should be provided via `list()`.

```{r, eval=FALSE}
fit <- lm(mpg~cyl, mtcars)
test_files(expectations = list(4, fit$coefficients))
```
```{r, echo=FALSE}
fit <- lm(mpg~cyl, mtcars)
test_files(files = my_files, expectations = list(4, fit$coefficients))
```

As you can see, there are students name from `name:` field, and summary on each student.

There is a variable `keyword_prefix` that defines the common part of the keywords, so you can ask your students to put their answer code chunks after some keywords. By default `keyword_prefix` is `"### "`, so your students can write "### 1.1", "### 1.2" and so on. But you can specify your own prefixes.

If we combine both `test_files` and `make_expectations` functions we can get the same summary for all students:

```{r, eval=FALSE}
test_files(expectations = make_expectations("test_1.Rmd"))
```
```{r, echo=FALSE}
test_files(files = my_files, expectations = make_expectations(my_files[1]))
```

It is important to note, that all checks doesn't create any variables in your working environment, so all students are checked independently. But you should know libraries that your students used, and turn them on in advance.

If your students (and you) have some plots in your markdowns, they will be created in your Viewer, so it is nice practice to ask your students to write their names on the plots. There is no good way to check plot correctness, so I propose not to use automatic check here.

### 3. Citing `AssignmentCheck`
It is important to cite R and R packages when you use them. For this purpose use the `citation` function in R:
```{r}
citation("AssignmentCheck")
```
